<script lang="ts">
	import DocsLayout from '../../../DocsLayout/DocsLayout.svelte';
	import CodeBlock from '$lib/components/DataDisplay/CodeBlock/CodeBlock.svelte';

	import { Icon } from '@steeze-ui/svelte-icon';
	import { LightBulb } from '@steeze-ui/heroicons';
</script>

<DocsLayout>
	<svelte:fragment slot="bcu-docs-detail">
		<section class="flex flex-col gap-10">
			<!-- Breadcrumbs -->
			<ol class="bcu-breadcrumb">
				<li class="bcu-crumb"><a href="/docs/contributing">Contributing</a></li>
				<li class="bcu-crumb-separator" aria-hidden>&rsaquo;</li>
				<li>Documentation</li>
			</ol>

			<!-- Header -->
			<header class="space-y-4">
				<h1>Documentation</h1>
				<!-- prettier-ignore -->
				<p>
			Below is an introduction to automated documentation using <a href="https://github.com/carbon-design-system/sveld" target="_blank" rel="noreferrer">Sveld</a> within BlackCatUI. This covers the process of documenting each type of feature, then utilizing this data within the documentation pages.
		</p>
				<a
					class="bcu-button variant-filled"
					href="https://github.com/carbon-design-system/sveld"
					target="_blank"
					rel="noreferrer">View the Sveld Documentation</a
				>
			</header>

			<hr />

			<!-- Intro -->
			<p class="!text-xl">
				Sveld makes use of <a href="https://tsdoc.org" target="_blank" rel="noreferrer"
					>TSDoc tags</a
				>
				(a superset of JSDocs) to generate component documentation from the component code itself. This
				comes with the benefit of providing additional
				<a
					href="https://code.visualstudio.com/docs/editor/intellisense"
					target="_blank"
					rel="noreferrer">Intellisense</a
				>
				features to aid developers implementing BlackCatUI components in tools like VS Code. Tap
				<kbd>Ctrl/âŒ˜ + i</kbd> within a component declaration to view IntelliSense recommendations.
			</p>

			<!-- Generating Documentation -->
			<section class="space-y-4">
				<h2>Generating Documentation</h2>
				<h3>Props</h3>
				<a
					class="bcu-button variant-soft"
					href="https://github.com/carbon-design-system/sveld#type"
					target="_blank"
					rel="noreferrer"
				>
					View Sveld Documentation
				</a>
				<p>
					To document component properties, add TSDoc comments using the <code>/** ... */</code> format.
					In most use cases Sveld will automatically parse relevant information - including the property
					name, type, value, and your description.
				</p>
				<CodeBlock
					language="js"
					code={`
/** Set the preferred search method. */
export let mode = 'fuzz';
			`}
				/>
				<p>
					The <code>CssClasses</code> class denotes properties that use Tailwind utility classes. Set
					this to aid IntelliSense features.
				</p>
				<CodeBlock
					language="js"
					code={`
import type { CssClasses } from '$lib';\n
/** Provide classes to set vertical item spacing. */
export let spacing: CssClasses = 'space-y-1';
			`}
				/>

				<p>
					For advanced or custom types, you may need to specify this information. This can be
					accomplished using the <code>@type</code> tag with block-style comments. Specify the type in
					curly brackets immediately following the tag.
				</p>
				<CodeBlock
					language="js"
					code={`
/**
 * Bind this to your form data, represents the "files" data from the input.
 * @type {FileList}
 */
export let files: FileList;
`}
				/>
				<p>
					Ensure you document Context API <code>getContext</code> values to provide Intellisense for
					child components. However, we intentionally exclude these values from the Props table.
				</p>
				<CodeBlock
					language="js"
					code={`
/** Provide classes to set the hover background color. */
export let hover: string = getContext('hover');
`}
				/>
				<p>See the Accordion component for a reference using both parent and child components.</p>
			</section>

			<!-- Slots -->
			<section class="space-y-4">
				<h3>Slots</h3>
				<a
					class="bcu-button variant-soft"
					href="https://github.com/carbon-design-system/sveld#slot"
					target="_blank"
					rel="noreferrer"
				>
					View Sveld Documentation
				</a>
				<p>
					Slot documentation is handle via TSDoc block comments at the top of your script tag (by
					convention). Note that Sveld does not currently support descriptions for the <code
						>default</code
					> slot. Instead, we recommend you opt for a Usage tab example and instructions to illustrate
					the use of this slot.
				</p>
				<CodeBlock
					language="js"
					code={`
// Slots
/**
 * @slot lead - Provide a leading element, such as an icon.
 * @slot content - Provide the alert message text.
 */`}
				/>
				<aside class="bcu-alert variant-ghost-warning">
					<Icon src={LightBulb} class="w-8" />
					<div class="bcu-alert-message">
						The leading <code>// ...</code> comment is required for Sveld to parse the slot descriptions.
						This is not optional.
					</div>
				</aside>
			</section>

			<!-- Events -->
			<section class="space-y-4">
				<h3>Events</h3>
				<a
					class="bcu-button variant-soft"
					href="https://github.com/carbon-design-system/sveld#event"
					target="_blank"
					rel="noreferrer"
				>
					View Sveld Documentation
				</a>
				<p>
					Sveld will automatically document forwarded events. You should not attempt to document
					these! However, dispatched events may be documented similar to props - with a TSDocs
					comment applied directly above the <code>dispatch()</code> method. Provide the event response
					in curly brackets, followed by the event name, a dash, and then the event description.
				</p>
				<CodeBlock
					language="js"
					code={`
/** @event {{ event: DragEvent }} dragover - When a file is dragged over. */
dispatch('dragover', event);`}
				/>
			</section>

			<hr />

			<!-- Using Documentation -->
			<section class="space-y-4">
				<h2>Using Documentation</h2>
				<!-- prettier-ignore -->
				<p>
			Now that our components are ready, it's time to create the documentation page that displays all of the information derived by Sveld.
			We provide a boilerplate template in <code>/src/routes/(inner)/template/+page.svelte</code>. Copy this to the appropriate file route location and use our recommend naming convention (e.g. <code>/routes/components/your-new-component/+page.svelte</code>).
		</p>
				<!-- Documentation Tables -->
				<h3>Documentation Tables</h3>
				<p>
					To populate each documentation table we'll need to import our Sveld documentation data.
					Follow the instructions below:
				</p>
				<ol class="list-decimal list-outside ml-8 space-y-1">
					<li>
						Create a duplicate of your component import statement, e.g. <code
							>import Avatar from '$lib/components/Avatar/Avatar.svelte';</code
						>
					</li>
					<li>
						Rename the import reference using the convention: <code>Avatar</code> ->
						<code>sveldAvatar</code>.
					</li>
					<li>
						Append the following URL parameters to the end of your import statement, e.g.: <code
							>.../Accordion.svelte?raw&sveld</code
						>.
					</li>
					<li>
						Finally, pass the import reference to the DocShell settings like so: <code
							>components: [&#123; sveld: sveldAvatar &#125;]</code
						>
					</li>
				</ol>
				<!-- DocShell Settings -->
				<h3>DocShell Settings</h3>
				<p>
					We can provide settings to our DocShell component using <code
						>const settings: DocsShellSettings</code
					>. This allows you to populate all relevant settings on the page.
				</p>
				<section
					class="bcu-card variant-glass p-4 flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0 md:space-x-4"
				>
					<div class="space-y-2">
						<p>Reference all available settings from the Typescript interface defintion.</p>
					</div>
					<a
						class="bcu-button variant-filled"
						href="https://github.com/CodingCatDev/blackcatui/blob/main/src/routes/(docs)/DocsShell/types.ts"
						target="_blank"
						rel="noreferrer">View Available Settings</a
					>
				</section>
				<p>Below are existing documentation pages we recommend you reference:</p>
				<ul class="list-disc list-outside ml-8 space-y-1">
					<li>
						<a href="/inputs/button">Buttons</a> showcases how to document Tailwind Element classes.
					</li>
					<li>
						<a href="/layout/accordion">Accordion</a> makes use of most Component settings utilizing
						Sveld.
					</li>
					<li>
						<a href="/data-display/paginator">Paginator</a> uses Dipatched Event documentation.
					</li>
				</ul>
				<!-- Examples -->
				<h3>Examples</h3>
				<p>
					When showcasing examples of new features we typically handle this by one of two methods:
				</p>
				<ul class="list-disc list-outside ml-8 space-y-1">
					<li>
						<strong>Sandbox</strong> (e.g. <a href="/layout/app-shell">App Shell</a>) - which
						provide a dynamic and interactive example that can be adjusted live.
					</li>
					<li>
						<strong>Static</strong> (e.g. <a href="/layout/app-bar">App Bar</a>) - with multiple
						static examples displaying various configurations.
					</li>
				</ul>
				<p>
					Dynamic examples are preferred, but remember the overall goal is to showcase how the
					feature operates.
				</p>
				<!-- Usage -->
				<h3>Usage</h3>
				<p>
					In addition to examples, you should provide multiple use case demonstrations using the <code
						>Preview</code
					> component to help end developers understand how to make use of your new components and features.
				</p>
				<!-- Keyboard Interactions -->
				<h3>Keyboard Interactions</h3>
				<p>
					Finally, don't forget to document relevant keyboard interactions for accessibility.
					Provide these to the DocShell settings.
				</p>
			</section>
		</section>
	</svelte:fragment>
</DocsLayout>
